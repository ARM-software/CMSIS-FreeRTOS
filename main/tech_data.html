<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMSIS-FreeRTOS: Technical data and limitations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="footer.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="cmsis_logo_white_small.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">CMSIS-FreeRTOS
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown(this);
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">CMSIS-RTOS2 compliant FreeRTOS Implementation</div>
  </td>
  <!--END !PROJECT_NAME-->
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('tech_data.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Technical data and limitations </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This lists the technical data of CMSIS-FreeRTOS.</p>
<h1><a class="anchor" id="td_limitations"></a>
Limitations</h1>
<p >The following list briefly describes the limitations and unsupported features of the CMSIS-RTOS2 wrapper for FreeRTOS:</p><ul>
<li>Static memory allocation will only work if <em>all</em> memory (from attributes structure) is provided statically. In order to allocate object memory statically, you need to:<ul>
<li>provide the memory for control blocks and stack in the <code>osThreadAttr_t</code> structure for threads.</li>
<li>provide the memory for control blocks and message data in the <code>osMessageQueueAttr_t</code> structure for memory queues.</li>
<li>provide the memory for control blocks for other objects in the object's attributes structure.</li>
</ul>
</li>
<li>Each timer object requires additional 8 bytes of memory:<ul>
<li>to allocate all memory statically, provide the memory for control block of size (sizeof(StaticTimer_t) + 8 bytes)</li>
<li>otherwise, additional 8 bytes of dynamic memory will be used</li>
</ul>
</li>
<li><code>osKernelSuspend</code> and <code>osKernelResume</code> are not supported.</li>
<li><code>osThreadDetach</code>, <code>osThreadJoin()</code> and attribute <code>osThreadJoinable</code> are not supported (<code>osThreadNew</code> returns NULL when osThreadJoinable attribute is specified).</li>
<li><code>osThreadGetStackSize</code> is not implemented.</li>
<li>Event flags are limited to 24 bits.</li>
<li><code>osEventFlagsGetName</code> is not implemented.</li>
<li><code>osEventFlagsWait</code> cannot be called from an ISR.</li>
<li>Priority inherit protocol is used as default mutex behavior (<code>osMutexNew</code> creates priority inherit mutex object by default and ignores <code>osMutexPrioInherit</code> attribute when specified).</li>
<li>Robust mutex objects are not supported (<code>osMutexNew</code> returns NULL when <code>osMutexRobust</code> attribute is specified).</li>
<li><code>osMutexGetName</code> is not implemented and always returns NULL.</li>
<li><code>osSemaphoreGetName</code> is not implemented and always returns NULL.</li>
<li><code>osMessageQueueGetName</code> is not implemented and always returns NULL.</li>
<li><code>osMessageQueuePut</code> and <code>osMessageQueueGet</code> always ignore message priority.</li>
<li><code>Process Isolation (Functional Safety)</code> functions are not implemented.</li>
</ul>
<h1><a class="anchor" id="td_validation"></a>
Validation suite results</h1>
<p >CMSIS provides a <a href="https://arm-software.github.io/CMSIS_6/latest/RTOS2/rtosValidation.html" target="_blank">CMSIS-RTOS2 validation suite</a> that can be used to test a real-time operating system for compliance to the standard. The test suite has been executed successfully on the CMSIS-FreeRTOS implementation (<a href="cmsis_rtos2_validation.txt">see results</a>).</p>
<p >The following table explains the exceptions:</p>
<table class="doxtable" summary="Validation Exceptions">
<tr>
<th>Test Case </th><th>Result </th><th>Reason </th><th>Summary  </th></tr>
<tr>
<td>TC_osKernelGetState_2 </td><td>not executed </td><td>unsupported feature </td><td>Test attempts to call <code>osKernelGetState</code> after a <code>osKernelSuspend</code> call. osKernelSuspend is not implemented.   </td></tr>
<tr>
<td>TC_osKernelLock_2 </td><td>not executed </td><td>unsupported feature </td><td>Test attempts to call <code>osKernelLock</code> after a <code>osKernelSuspend</code> call. <code>osKernelSuspend</code> is not implemented.   </td></tr>
<tr>
<td>TC_osKernelUnlock_2 </td><td>not executed </td><td>unsupported feature </td><td>Test attempts to call <code>osKernelUnlock</code> after a <code>osKernelSuspend</code> call. <code>osKernelSuspend</code> is not implemented.   </td></tr>
<tr>
<td>TC_osKernelSuspend_1 </td><td>not executed </td><td>unsupported feature </td><td>Test validates <code>osKernelSuspend</code> which is not implemented.   </td></tr>
<tr>
<td>TC_osKernelResume_1 </td><td>not executed </td><td>unsupported feature </td><td>Test validates <code>osKernelResume</code> which is not implemented.   </td></tr>
<tr>
<td>TC_osThreadNew_3 </td><td>not executed </td><td>unsupported feature </td><td>Test attempts to create joinable thread using <code>osThreadJoinable</code> attribute. FreeRTOS does not support joinable threads.   </td></tr>
<tr>
<td>TC_osThreadGetName_1 </td><td>failed </td><td>deviation </td><td>Test attempt to retrieve a name on an unnamed thread. An empty string is returned instead of NULL pointer.   </td></tr>
<tr>
<td>TC_osThreadGetState_3 </td><td>not executed </td><td>unsupported feature </td><td>Test attempts to retrieve a state of a terminated joinable thread. FreeRTOS does not support joinable threads.   </td></tr>
<tr>
<td>TC_osThreadDetach_1 </td><td>not executed </td><td>unsupported feature </td><td>Test validates <code>osThreadDetach</code> which is not implemented.   </td></tr>
<tr>
<td>TC_osThreadDetach_2 </td><td>not executed </td><td>unsupported feature </td><td>Test validates <code>osThreadDetach</code> which is not implemented.   </td></tr>
<tr>
<td>TC_osThreadJoin_1 </td><td>not executed </td><td>unsupported feature </td><td>Test validates <code>osThreadJoin</code> which is not implemented.   </td></tr>
<tr>
<td>TC_osThreadJoin_2 </td><td>not executed </td><td>unsupported feature </td><td>Test validates <code>osThreadJoin</code> which is not implemented.   </td></tr>
<tr>
<td>TC_osThreadJoin_3 </td><td>not executed </td><td>unsupported feature </td><td>Test validates <code>osThreadJoin</code> which is not implemented.   </td></tr>
<tr>
<td>TC_osThreadGetStackSize_1 </td><td>not executed </td><td>unsupported feature </td><td>Test validates <code>osThreadGetStackSize</code> which is not implemented.   </td></tr>
<tr>
<td>TC_ThreadReturn </td><td>not executed </td><td>unsupported feature </td><td>Test attempts to terminate a thread by just returning from a thread. FreeRTOS threads may not return.   </td></tr>
<tr>
<td>TC_osEventFlagsSet_1 </td><td>failed </td><td>deviation </td><td>Test attempts to set event flags by calling <code>osEventFlagsSet</code> multiple times without leaving ISR handler.<br  />
 To process ISR requests, FreeRTOS uses timer deamon which wakes-up after ISR execution.   </td></tr>
<tr>
<td>TC_osEventFlagsClear_1 </td><td>failed </td><td>deviation </td><td>Test attempts to clear event flags by calling <code>osEventFlagsClear</code> multiple times without leaving ISR handler.<br  />
 To process ISR requests, FreeRTOS uses timer deamon which wakes-up after ISR execution.   </td></tr>
<tr>
<td>TC_osEventFlagsWait_1 </td><td>failed </td><td>unsupported feature </td><td>Test attempts to wait for flags from ISR with zero timeout (try-semantic). FreeRTOS does not support such operation.   </td></tr>
<tr>
<td>TC_osEventFlagsGetName_1 </td><td>not executed </td><td>unsupported feature </td><td>Test validates <code>osEventFlagsGetName</code> which is not implemented.   </td></tr>
<tr>
<td>TC_osMutexNew_4 </td><td>not executed </td><td>unsupported feature </td><td>Test attempts to create a robust mutex. FreeRTOS implementation does not support robust mutexes.   </td></tr>
<tr>
<td>TC_osMutexGetName_1 </td><td>not executed </td><td>unsupported feature </td><td>Test validates <code>osMutexGetName</code> which is not implemented.   </td></tr>
<tr>
<td>TC_MutexRobust </td><td>not executed </td><td>unsupported feature </td><td>Test attempts to validate robust mutex behavior. FreeRTOS implementation does not support robust mutexes.   </td></tr>
<tr>
<td>TC_MutexOwnership </td><td>not executed </td><td>unsupported feature </td><td>Test attempts to release a mutex from a thread which is not the mutex owner.<br  />
 FreeRTOS implementation does not verify ownership on mutex release.   </td></tr>
<tr>
<td>TC_osSemaphoreGetName_1 </td><td>not executed </td><td>unsupported feature </td><td>Test validates <code>osSemaphoreGetName</code> which is not implemented.   </td></tr>
<tr>
<td>TC_osMessageQueueGetName_1 </td><td>not executed </td><td>unsupported feature </td><td>Test validates <code>osMessageQueueGetName</code> which is not implemented.   </td></tr>
</table>
<h1><a class="anchor" id="td_troubleshooting"></a>
Troubleshooting</h1>
<p >Users looking for help shall check <a href="https://freertos.org/FAQHelp.html">subsection of the full FreeRTOS FAQ</a>. It contains many useful information that also apply when using FreeRTOS in context of CMSIS-FreeRTOS.</p>
<p >Additionally, please take a look at the following:</p>
<ol>
<li>
<b>Interrupts are disabled when main is called or before the kernel is started</b> <br  />
 Before the FreeRTOS kernel is started, threads (i.e. tasks) may be created together with other objects like mutexes, semaphores, message queues etc. When functions like xTaskCreate, xSemaphoreCreateMutex, xQueueCreate and others get called, they prevent interrupt handlers from calling FreeRTOS API functions in order to keep FreeRTOS kernel variables and state machine consistent (see also here <a href="https://freertos.org/FAQHelp.html">Interrupts are not executing</a>). <br  />
 In cases when interrupts may be executed after object creation and before the FreeRTOS kernel is started they can be re-enabled: <div class="fragment"><div class="line">portENABLE_INTERRUPTS();</div>
</div><!-- fragment --> Make sure that the interrupts you execute in such case do not call FreeRTOS API.  </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
