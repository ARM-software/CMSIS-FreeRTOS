<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMSIS-FreeRTOS: Example projects</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="footer.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="cmsis_logo_white_small.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">CMSIS-FreeRTOS
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown(this);
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">CMSIS-RTOS2 compliant FreeRTOS Implementation</div>
  </td>
  <!--END !PROJECT_NAME-->
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('examples.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Example projects </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >This pack contains two example projects:</p><ul>
<li><a class="el" href="examples.html#example_hello">Hello World</a></li>
<li><a class="el" href="examples.html#example_trustzone">TrustZone</a></li>
</ul>
<p >The first example shows how to configure a simple application using FreeRTOS with CMSIS-RTOS2, whereas the second example shows how to use the FreeRTOS with CMSIS-RTOS2 in an application that utilizes TrustZone secure/non-secure execution.</p>
<p >Provided examples use the <a href="https://github.com/Open-CMSIS-Pack/cmsis-toolbox/blob/main/docs/YML-Input-Format.md">CMSIS Solution Project File Format</a> and can be build for multiple Cortex-M targets</p><ul>
<li>using <a href="https://github.com/Open-CMSIS-Pack/cmsis-toolbox/blob/main/docs/README.md#cmsis-toolbox">CMSIS Toolbox</a> either from the command line or</li>
<li>from Visual Studio Code by using <a href="https://developer.arm.com/documentation/108029/0000/?lang=en">Arm Keil Studio Cloud extensions</a>.</li>
</ul>
<p >The <b>Examples</b> solution defines projects and build information for each project.</p>
<h1><a class="anchor" id="build_run"></a>
Build and Run</h1>
<p >The <b>Examples</b> solution supports only "Debug" Build-Type which is optimized for debugging. It disables compiler optimization and retains all debug related information. By default, Arm Compiler 6 is used to build the projects.</p>
<h2><a class="anchor" id="build_target_types"></a>
Targets</h2>
<p >Each example can be built for multiple target processors. The below table lists supported target processors together with the corresponding context target-types and model executable that shall be used for running the application image.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Target processor   </th><th class="markdownTableHeadLeft">Target-Type   </th><th class="markdownTableHeadLeft">Model Executable    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Cortex-M0   </td><td class="markdownTableBodyLeft">CM0   </td><td class="markdownTableBodyLeft">FVP_MPS2_Cortex-M0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Cortex-M0+   </td><td class="markdownTableBodyLeft">CM0plus   </td><td class="markdownTableBodyLeft">FVP_MPS2_Cortex-M0plus    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Cortex-M3   </td><td class="markdownTableBodyLeft">CM3   </td><td class="markdownTableBodyLeft">FVP_MPS2_Cortex-M3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Cortex-M4   </td><td class="markdownTableBodyLeft">CM4   </td><td class="markdownTableBodyLeft">FVP_MPS2_Cortex-M4    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Cortex-M7   </td><td class="markdownTableBodyLeft">CM7   </td><td class="markdownTableBodyLeft">FVP_MPS2_Cortex-M7    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Cortex-M23   </td><td class="markdownTableBodyLeft">CM23   </td><td class="markdownTableBodyLeft">FVP_MPS2_Cortex-M23    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Cortex-M23   </td><td class="markdownTableBodyLeft">CM23_noTZ   </td><td class="markdownTableBodyLeft">FVP_MPS2_Cortex-M23    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Cortex-M33   </td><td class="markdownTableBodyLeft">CM33   </td><td class="markdownTableBodyLeft">FVP_MPS2_Cortex-M33    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Cortex-M33   </td><td class="markdownTableBodyLeft">CM33_noTZ   </td><td class="markdownTableBodyLeft">FVP_MPS2_Cortex-M33    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Cortex-M55   </td><td class="markdownTableBodyLeft">CM55   </td><td class="markdownTableBodyLeft">FVP_Corstone_SSE-300    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Cortex-M55   </td><td class="markdownTableBodyLeft">CM55_noTZ   </td><td class="markdownTableBodyLeft">FVP_Corstone_SSE-300    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Cortex-M85   </td><td class="markdownTableBodyLeft">CM85   </td><td class="markdownTableBodyLeft">FVP_Corstone_SSE-310    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Cortex-M85   </td><td class="markdownTableBodyLeft">CM85_noTZ   </td><td class="markdownTableBodyLeft">FVP_Corstone_SSE-310   </td></tr>
</table>
<h2><a class="anchor" id="build_vscode"></a>
Build in VS Code using Arm Keil Studio Pack extensions</h2>
<ul>
<li>See <a href="https://developer.arm.com/documentation/108029/0000/?lang=en">Arm Keil Studio Visual Studio Code Extensions User Guide</a> for more information about using the Keil Studio extensions.</li>
<li>Search for <a href="https://marketplace.visualstudio.com/items?itemName=Arm.keil-studio-pack">Arm Keil Studio Pack</a> in the Visual Studio Marketplace to download the extensions.</li>
</ul>
<p >To build a project using Keil Studio extensions open CMSIS view, open "Manage CMSIS Solution" view and select "Active Context" and "Active Projects". Build Type is automatically selected since there is only one option.</p>
<p >Once the context and projects are selected one can build them by selecting "Build" in CMSIS view.</p>
<h2><a class="anchor" id="build_cmdline"></a>
Build via command line</h2>
<ul>
<li>See <a href="https://github.com/Open-CMSIS-Pack/cmsis-toolbox/blob/main/docs/README.md">CMSIS-Toolbox documentation</a> to learn more about CMSIS Solution project build and management tools.</li>
</ul>
<p >To build the project via command line one can use the following command syntax:</p>
<div class="fragment"><div class="line">cbuild Examples.csolution.yml --context &lt;project-name&gt;.&lt;build-type&gt;+&lt;target-type&gt;</div>
</div><!-- fragment --><p >To list the available contexts execute the following command:</p>
<div class="fragment"><div class="line">cbuild list contexts Examples.csolution.yml</div>
</div><!-- fragment --><h2><a class="anchor" id="example_exec"></a>
Execute on Virtual Hardware Target</h2>
<p ><a href="https://www.arm.com/products/development-tools/simulation/virtual-hardware">Arm Virtual Hardware Target</a> simulation models are used to execute the example application images.</p>
<p >To execute application image (axf or elf) on an simulation model use the following command syntax: </p><div class="fragment"><div class="line">&lt;model-executable&gt; -f ./Target/&lt;target_type&gt;/fvp_config.txt -a ./out/&lt;project&gt;/&lt;project&gt;.axf</div>
</div><!-- fragment --><h1><a class="anchor" id="example_hello"></a>
Hello World</h1>
<p >The <b>Hello World</b> application can be used as a starting point when developing new application. Using it, one can verify initial system setup and configuration.</p>
<p >The application is simple and shows how to use CMSIS-RTOS2:</p><ul>
<li>how to initialize and start the RTOS kernel</li>
<li>how to create a new thread</li>
<li>how to retarget stdout</li>
</ul>
<p ><b>Build via command line</b></p>
<p >The following cbuild command may be used to build Hello World example project for Cortex-M3: </p><div class="fragment"><div class="line">cbuild Examples.csolution.yml --context Hello.Debug+CM3 --update-rte</div>
</div><!-- fragment --><p ><b>Execute via command line</b></p>
<p >To execute simulation model and run Hello World project executable for Cortex-M3 use the following command: </p><div class="fragment"><div class="line">FVP_MPS2_Cortex-M3 -f ./Target/CM3/fvp_config.txt -a ./out/Hello/Hello.axf</div>
</div><!-- fragment --><p >When executed, application outputs the following to the serial terminal:</p>
<div class="image">
<img src="hello_out.png" alt=""/>
</div>
<p> (Press Ctrl + C to stop the simulation model.)</p>
<h1><a class="anchor" id="example_trustzone"></a>
TrustZone</h1>
<p >The <b>TrustZone</b> application explains how to setup projects for booting and execution from TrustZone secure to non-secure domain and vice versa.</p>
<p >The application shows:</p><ul>
<li>how to boot from the secure domain and switch the execution to the non-secure domain</li>
<li>how to create the interface functions between secure and non-secure domain</li>
<li>how to use the secure/non-secure interface functions</li>
</ul>
<p ><b>Build via command line</b></p>
<p >TrustZone example must always be build in two steps:</p>
<ol type="1">
<li>Build secure side project for Cortex-M55 <div class="fragment"><div class="line">cbuild Examples.csolution.yml --context TZ_Secure.Debug+CM55 --update-rte</div>
</div><!-- fragment --></li>
<li>Build non-secure side project for Cortex-M55 <div class="fragment"><div class="line">cbuild Examples.csolution.yml --context TZ_NonSecure.Debug+CM55 --update-rte</div>
</div><!-- fragment --></li>
</ol>
<p ><b>Execute via command line</b></p>
<p >To execute simulation model and run TrustZone project executable for Cortex-M55 use the following command: </p><div class="fragment"><div class="line">FVP_Corstone_SSE-300 -f ./Target/CM55/fvp_config.txt -a ./out/TZ_NonSecure/TZ_NonSecure.axf -a ./out/TZ_Secure/TZ_Secure.axf</div>
</div><!-- fragment --><p >When executed, application outputs the following to the serial terminal:</p>
<div class="image">
<img src="trustzone_out.png" alt=""/>
</div>
<p> (Press Ctrl + C to stop the simulation model.) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
